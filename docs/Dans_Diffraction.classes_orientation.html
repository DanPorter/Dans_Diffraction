<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><title>Python: module Dans_Diffraction.classes_orientation</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head><body bgcolor="#f0f0f8">

<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="heading">
<tr bgcolor="#7799ee">
<td valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial">&nbsp;<br><big><big><strong><a href="Dans_Diffraction.html"><font color="#ffffff">Dans_Diffraction</font></a>.classes_orientation</strong></big></big> (version 1.0.0)</font></td
><td align=right valign=bottom
><font color="#ffffff" face="helvetica, arial"><a href=".">index</a><br><a href="file:c%3A%5Cusers%5Cgrp66007%5Conedrive%20-%20diamond%20light%20source%20ltd%5Cpythonprojects%5Cdans_diffraction%5Cdans_diffraction%5Cclasses_orientation.py">c:\users\grp66007\onedrive - diamond light source ltd\pythonprojects\dans_diffraction\dans_diffraction\classes_orientation.py</a></font></td></tr></table>
    <p><tt>Crystal&nbsp;<a href="#Orientation">Orientation</a>&nbsp;Class<br>
&nbsp;<br>
By&nbsp;Dan&nbsp;Porter,&nbsp;PhD<br>
Diamond<br>
2021<br>
&nbsp;<br>
Version&nbsp;1.0.0<br>
Last&nbsp;updated:&nbsp;27/09/21<br>
&nbsp;<br>
Version&nbsp;History:<br>
26/09/21&nbsp;0.1.0&nbsp;&nbsp;Version&nbsp;History&nbsp;started.<br>
27/09/21&nbsp;1.0.0&nbsp;&nbsp;Initial&nbsp;version&nbsp;finished<br>
&nbsp;<br>
@author:&nbsp;DGPorter</tt></p>
<p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#aa55cc">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Modules</strong></big></font></td></tr>
    
<tr><td bgcolor="#aa55cc"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><table width="100%" summary="list"><tr><td width="25%" valign=top><a href="Dans_Diffraction.functions_crystallography.html">Dans_Diffraction.functions_crystallography</a><br>
</td><td width="25%" valign=top><a href="Dans_Diffraction.functions_lattice.html">Dans_Diffraction.functions_lattice</a><br>
</td><td width="25%" valign=top><a href="numpy.html">numpy</a><br>
</td><td width="25%" valign=top></td></tr></table></td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#ee77aa">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Classes</strong></big></font></td></tr>
    
<tr><td bgcolor="#ee77aa"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><dl>
<dt><font face="helvetica, arial"><a href="builtins.html#object">builtins.object</a>
</font></dt><dd>
<dl>
<dt><font face="helvetica, arial"><a href="Dans_Diffraction.classes_orientation.html#CrystalOrientation">CrystalOrientation</a>
</font></dt><dt><font face="helvetica, arial"><a href="Dans_Diffraction.classes_orientation.html#Orientation">Orientation</a>
</font></dt></dl>
</dd>
</dl>
 <p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#ffc8d8">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#000000" face="helvetica, arial"><a name="CrystalOrientation">class <strong>CrystalOrientation</strong></a>(<a href="builtins.html#object">builtins.object</a>)</font></td></tr>
    
<tr bgcolor="#ffc8d8"><td rowspan=2><tt>&nbsp;&nbsp;&nbsp;</tt></td>
<td colspan=2><tt><a href="#CrystalOrientation">CrystalOrientation</a>(*lattice_parameters,&nbsp;**kwargs)<br>
&nbsp;<br>
<a href="#CrystalOrientation">CrystalOrientation</a>&nbsp;Class<br>
&nbsp;<br>
Define&nbsp;an&nbsp;orientation&nbsp;matrix&nbsp;in&nbsp;the&nbsp;diffractometer&nbsp;frame<br>
Diffractometer&nbsp;frame&nbsp;according&nbsp;to&nbsp;Fig.&nbsp;1,&nbsp;H.&nbsp;You,&nbsp;J.&nbsp;Appl.&nbsp;Cryst&nbsp;32&nbsp;(1999),&nbsp;614-623<br>
&nbsp;&nbsp;z-axis&nbsp;:&nbsp;axis&nbsp;parallel&nbsp;to&nbsp;the&nbsp;phi&nbsp;rotation&nbsp;axis&nbsp;when&nbsp;all&nbsp;angles&nbsp;0&nbsp;(towards&nbsp;wall&nbsp;(+x)&nbsp;in&nbsp;lab&nbsp;frame)<br>
&nbsp;&nbsp;x-axis&nbsp;:&nbsp;vector&nbsp;normal&nbsp;to&nbsp;phi&nbsp;axis&nbsp;where&nbsp;phi=0&nbsp;(toward&nbsp;ceiling&nbsp;(+y)&nbsp;in&nbsp;lab&nbsp;frame)<br>
&nbsp;&nbsp;y-axis&nbsp;:&nbsp;vector&nbsp;normal&nbsp;to&nbsp;x,z&nbsp;axes&nbsp;(parallel&nbsp;to&nbsp;beam&nbsp;(+z)&nbsp;in&nbsp;lab&nbsp;frame)<br>&nbsp;</tt></td></tr>
<tr><td>&nbsp;</td>
<td width="100%">Methods defined here:<br>
<dl><dt><a name="CrystalOrientation-__init__"><strong>__init__</strong></a>(self, *lattice_parameters, **kwargs)</dt><dd><tt>Initialize&nbsp;self.&nbsp;&nbsp;See&nbsp;help(type(self))&nbsp;for&nbsp;accurate&nbsp;signature.</tt></dd></dl>

<dl><dt><a name="CrystalOrientation-__repr__"><strong>__repr__</strong></a>(self)</dt><dd><tt>Return&nbsp;repr(self).</tt></dd></dl>

<dl><dt><a name="CrystalOrientation-__str__"><strong>__str__</strong></a>(self)</dt><dd><tt>Return&nbsp;str(self).</tt></dd></dl>

<dl><dt><a name="CrystalOrientation-bmatrix"><strong>bmatrix</strong></a>(self)</dt><dd><tt>Return&nbsp;the&nbsp;B&nbsp;matrix&nbsp;from&nbsp;Busing&nbsp;&amp;&nbsp;Levy&nbsp;in&nbsp;the&nbsp;diffractometer&nbsp;frame</tt></dd></dl>

<dl><dt><a name="CrystalOrientation-diff6circle2hkl"><strong>diff6circle2hkl</strong></a>(self, phi=0, chi=0, eta=0, mu=0, delta=0, gamma=0, energy_kev=None, wavelength=1.0)</dt><dd><tt>Return&nbsp;[h,k,l]&nbsp;position&nbsp;of&nbsp;diffractometer&nbsp;axes&nbsp;at&nbsp;given&nbsp;energy<br>
:param&nbsp;phi:&nbsp;float&nbsp;sample&nbsp;angle&nbsp;in&nbsp;degrees<br>
:param&nbsp;chi:&nbsp;float&nbsp;sample&nbsp;angle&nbsp;in&nbsp;degrees<br>
:param&nbsp;eta:&nbsp;float&nbsp;sample&nbsp;angle&nbsp;in&nbsp;degrees<br>
:param&nbsp;mu:&nbsp;float&nbsp;sample&nbsp;angle&nbsp;in&nbsp;degrees<br>
:param&nbsp;delta:&nbsp;float&nbsp;detector&nbsp;angle&nbsp;in&nbsp;degrees<br>
:param&nbsp;gamma:&nbsp;float&nbsp;detector&nbsp;angle&nbsp;in&nbsp;degrees<br>
:param&nbsp;energy_kev:&nbsp;float&nbsp;energy&nbsp;in&nbsp;KeV<br>
:param&nbsp;wavelength:&nbsp;float&nbsp;wavelength&nbsp;in&nbsp;A<br>
:return:&nbsp;[h,k,l]</tt></dd></dl>

<dl><dt><a name="CrystalOrientation-lp"><strong>lp</strong></a>(self)</dt><dd><tt>Return&nbsp;tuple&nbsp;of&nbsp;lattice&nbsp;parameters&nbsp;in&nbsp;angstroms&nbsp;and&nbsp;degrees</tt></dd></dl>

<dl><dt><a name="CrystalOrientation-lp_star"><strong>lp_star</strong></a>(self)</dt><dd><tt>Return&nbsp;tuple&nbsp;of&nbsp;reciprocal&nbsp;lattice&nbsp;parameters&nbsp;in&nbsp;inverse-angstroms&nbsp;and&nbsp;degrees</tt></dd></dl>

<dl><dt><a name="CrystalOrientation-realspace"><strong>realspace</strong></a>(self, uvw)</dt><dd><tt>Generate&nbsp;vector&nbsp;in&nbsp;real&nbsp;space&nbsp;from&nbsp;uvw&nbsp;=&nbsp;[u*a,&nbsp;v*b,&nbsp;w*c]</tt></dd></dl>

<dl><dt><a name="CrystalOrientation-reciprocal_unit_vectors"><strong>reciprocal_unit_vectors</strong></a>(self)</dt><dd><tt>Return&nbsp;unit&nbsp;vectors&nbsp;in&nbsp;recirpocal&nbsp;space&nbsp;[a*,&nbsp;b*,&nbsp;c*]</tt></dd></dl>

<dl><dt><a name="CrystalOrientation-recspace"><strong>recspace</strong></a>(self, hkl)</dt><dd><tt>Generate&nbsp;vector&nbsp;in&nbsp;reciprocal&nbsp;space&nbsp;from&nbsp;hkl&nbsp;=&nbsp;[h*a*,&nbsp;k*b*,&nbsp;l*c*]</tt></dd></dl>

<dl><dt><a name="CrystalOrientation-set_latt"><strong>set_latt</strong></a>(self, a=None, b=None, c=None, alpha=None, beta=None, gamma=None)</dt><dd><tt>Set&nbsp;or&nbsp;change&nbsp;lattice&nbsp;parameters</tt></dd></dl>

<dl><dt><a name="CrystalOrientation-ubmatrix"><strong>ubmatrix</strong></a>(self)</dt><dd><tt>Return&nbsp;UB&nbsp;matrix&nbsp;from&nbsp;Busing&nbsp;&amp;&nbsp;Levy&nbsp;in&nbsp;the&nbsp;diffractometer&nbsp;frame</tt></dd></dl>

<dl><dt><a name="CrystalOrientation-unit_vectors"><strong>unit_vectors</strong></a>(self)</dt><dd><tt>Return&nbsp;real&nbsp;space&nbsp;unit&nbsp;vectors&nbsp;[a,&nbsp;b,&nbsp;c]</tt></dd></dl>

<hr>
Data descriptors defined here:<br>
<dl><dt><strong>__dict__</strong></dt>
<dd><tt>dictionary&nbsp;for&nbsp;instance&nbsp;variables&nbsp;(if&nbsp;defined)</tt></dd>
</dl>
<dl><dt><strong>__weakref__</strong></dt>
<dd><tt>list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object&nbsp;(if&nbsp;defined)</tt></dd>
</dl>
</td></tr></table> <p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#ffc8d8">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#000000" face="helvetica, arial"><a name="Orientation">class <strong>Orientation</strong></a>(<a href="builtins.html#object">builtins.object</a>)</font></td></tr>
    
<tr bgcolor="#ffc8d8"><td rowspan=2><tt>&nbsp;&nbsp;&nbsp;</tt></td>
<td colspan=2><tt><a href="#Orientation">Orientation</a>(umatrix=None,&nbsp;rotation=None,&nbsp;labframe=None)<br>
&nbsp;<br>
<a href="#CrystalOrientation">CrystalOrientation</a>&nbsp;Class<br>
Contains&nbsp;[3*3]&nbsp;matrices&nbsp;to&nbsp;control&nbsp;the&nbsp;orientation&nbsp;of&nbsp;a&nbsp;crystal&nbsp;in&nbsp;space<br>
&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;crystal&nbsp;is&nbsp;initially&nbsp;defined&nbsp;in&nbsp;the&nbsp;"Diffractometer&nbsp;Frame"<br>
&nbsp;&nbsp;&nbsp;&nbsp;"umatrix"&nbsp;controls&nbsp;the&nbsp;initial&nbsp;alignment&nbsp;of&nbsp;the&nbsp;cell&nbsp;with&nbsp;respect&nbsp;to&nbsp;this&nbsp;frame<br>
&nbsp;&nbsp;&nbsp;&nbsp;"rotation"&nbsp;rotates&nbsp;the&nbsp;cell&nbsp;as&nbsp;if&nbsp;on&nbsp;a&nbsp;diffractometer<br>
&nbsp;&nbsp;&nbsp;&nbsp;"labframe"&nbsp;is&nbsp;a&nbsp;transformation&nbsp;matrix&nbsp;from&nbsp;the&nbsp;"Diffractometer&nbsp;Frame"&nbsp;to&nbsp;a&nbsp;frame&nbsp;of&nbsp;your&nbsp;choice<br>
&nbsp;<br>
E.G.<br>
&nbsp;&nbsp;&nbsp;&nbsp;o&nbsp;=&nbsp;<a href="#Orientation">Orientation</a>()<br>
&nbsp;&nbsp;&nbsp;&nbsp;o.<a href="#Orientation-orient">orient</a>(a_axis=[1,0,0],&nbsp;c_axis=[0,0,1])<br>
&nbsp;&nbsp;&nbsp;&nbsp;o.<a href="#Orientation-rotate_6circle">rotate_6circle</a>(chi=90,&nbsp;eta=20)<br>
&nbsp;&nbsp;&nbsp;&nbsp;o.<a href="#Orientation-set_lab_i16">set_lab_i16</a>()<br>
&nbsp;&nbsp;&nbsp;&nbsp;o([0,0,1])<br>
&nbsp;&nbsp;&nbsp;&nbsp;returns&nbsp;&gt;&nbsp;[&nbsp;0.&nbsp;&nbsp;&nbsp;&nbsp;,&nbsp;&nbsp;0.9397,&nbsp;-0.342&nbsp;]<br>
&nbsp;<br>
---&nbsp;The&nbsp;Diffractometer&nbsp;Frame&nbsp;---<br>
Diffractometer&nbsp;frame&nbsp;according&nbsp;to&nbsp;Fig.&nbsp;1,&nbsp;H.&nbsp;You,&nbsp;J.&nbsp;Appl.&nbsp;Cryst&nbsp;32&nbsp;(1999),&nbsp;614-623<br>
&nbsp;&nbsp;z-axis&nbsp;:&nbsp;axis&nbsp;parallel&nbsp;to&nbsp;the&nbsp;phi&nbsp;rotation&nbsp;axis&nbsp;when&nbsp;all&nbsp;angles&nbsp;0&nbsp;(towards&nbsp;wall&nbsp;(+x)&nbsp;in&nbsp;lab&nbsp;frame)<br>
&nbsp;&nbsp;x-axis&nbsp;:&nbsp;vector&nbsp;normal&nbsp;to&nbsp;phi&nbsp;axis&nbsp;where&nbsp;phi=0&nbsp;(toward&nbsp;ceiling&nbsp;(+y)&nbsp;in&nbsp;lab&nbsp;frame)<br>
&nbsp;&nbsp;y-axis&nbsp;:&nbsp;vector&nbsp;normal&nbsp;to&nbsp;x,z&nbsp;axes&nbsp;(parallel&nbsp;to&nbsp;beam&nbsp;(+z)&nbsp;in&nbsp;lab&nbsp;frame)<br>&nbsp;</tt></td></tr>
<tr><td>&nbsp;</td>
<td width="100%">Methods defined here:<br>
<dl><dt><a name="Orientation-__call__"><strong>__call__</strong></a>(self, vec)</dt><dd><tt>Call&nbsp;self&nbsp;as&nbsp;a&nbsp;function.</tt></dd></dl>

<dl><dt><a name="Orientation-__init__"><strong>__init__</strong></a>(self, umatrix=None, rotation=None, labframe=None)</dt><dd><tt>Initialize&nbsp;self.&nbsp;&nbsp;See&nbsp;help(type(self))&nbsp;for&nbsp;accurate&nbsp;signature.</tt></dd></dl>

<dl><dt><a name="Orientation-__repr__"><strong>__repr__</strong></a>(self)</dt><dd><tt>Return&nbsp;repr(self).</tt></dd></dl>

<dl><dt><a name="Orientation-__str__"><strong>__str__</strong></a>(self)</dt><dd><tt>Return&nbsp;str(self).</tt></dd></dl>

<dl><dt><a name="Orientation-clear"><strong>clear</strong></a>(self)</dt><dd><tt>Clear&nbsp;orientation</tt></dd></dl>

<dl><dt><a name="Orientation-diff6circle"><strong>diff6circle</strong></a>(self, delta=0, gamma=0, energy_kev=None, wavelength=1.0)</dt><dd><tt>Calcualte&nbsp;wavevector&nbsp;in&nbsp;diffractometer&nbsp;axis&nbsp;using&nbsp;detector&nbsp;angles<br>
:param&nbsp;delta:&nbsp;float&nbsp;angle&nbsp;in&nbsp;degrees&nbsp;in&nbsp;vertical&nbsp;direction&nbsp;(about&nbsp;diff-z)<br>
:param&nbsp;gamma:&nbsp;float&nbsp;angle&nbsp;in&nbsp;degrees&nbsp;in&nbsp;horizontal&nbsp;direction&nbsp;(about&nbsp;diff-x)<br>
:param&nbsp;energy_kev:&nbsp;float&nbsp;energy&nbsp;in&nbsp;KeV<br>
:param&nbsp;wavelength:&nbsp;float&nbsp;wavelength&nbsp;in&nbsp;A<br>
:param&nbsp;lab:&nbsp;[3*3]&nbsp;lab&nbsp;transformation&nbsp;matrix<br>
:return:&nbsp;q[1*3],&nbsp;ki[1*3],&nbsp;kf[1*3]</tt></dd></dl>

<dl><dt><a name="Orientation-orient"><strong>orient</strong></a>(self, a_axis=None, b_axis=None, c_axis=None)</dt><dd><tt>Set&nbsp;orientation&nbsp;matrix&nbsp;from&nbsp;directions&nbsp;of&nbsp;crystal&nbsp;axes</tt></dd></dl>

<dl><dt><a name="Orientation-random_orientation"><strong>random_orientation</strong></a>(self, a_axis=None, b_axis=None, c_axis=None)</dt><dd><tt>Set&nbsp;a&nbsp;random&nbsp;orientation&nbsp;matrix</tt></dd></dl>

<dl><dt><a name="Orientation-rotate_6circle"><strong>rotate_6circle</strong></a>(self, phi=0, chi=0, eta=0, mu=0)</dt><dd><tt>Set&nbsp;rotation&nbsp;matrix&nbsp;using&nbsp;6-circle&nbsp;diffractometer&nbsp;axes</tt></dd></dl>

<dl><dt><a name="Orientation-set_lab"><strong>set_lab</strong></a>(self, lab)</dt><dd><tt>Set&nbsp;transformation&nbsp;matrix&nbsp;between&nbsp;diffractometer&nbsp;and&nbsp;lab</tt></dd></dl>

<dl><dt><a name="Orientation-set_lab_i16"><strong>set_lab_i16</strong></a>(self)</dt><dd><tt>Set&nbsp;lab&nbsp;transformation&nbsp;matrix&nbsp;for&nbsp;beamline&nbsp;I16&nbsp;at&nbsp;Diamond&nbsp;Light&nbsp;Source</tt></dd></dl>

<dl><dt><a name="Orientation-set_r"><strong>set_r</strong></a>(self, rotation)</dt><dd><tt>Set&nbsp;rotation&nbsp;matrix&nbsp;in&nbsp;diffractometer&nbsp;frame</tt></dd></dl>

<dl><dt><a name="Orientation-set_u"><strong>set_u</strong></a>(self, umatrix)</dt><dd><tt>Set&nbsp;oritenation&nbsp;matrix&nbsp;in&nbsp;diffractometer&nbsp;frame</tt></dd></dl>

<dl><dt><a name="Orientation-vector"><strong>vector</strong></a>(self, vec)</dt><dd><tt>Return&nbsp;vector&nbsp;transformed&nbsp;by&nbsp;orientation,&nbsp;rotation&nbsp;and&nbsp;lab&nbsp;transformation</tt></dd></dl>

<hr>
Data descriptors defined here:<br>
<dl><dt><strong>__dict__</strong></dt>
<dd><tt>dictionary&nbsp;for&nbsp;instance&nbsp;variables&nbsp;(if&nbsp;defined)</tt></dd>
</dl>
<dl><dt><strong>__weakref__</strong></dt>
<dd><tt>list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object&nbsp;(if&nbsp;defined)</tt></dd>
</dl>
</td></tr></table></td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#eeaa77">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Functions</strong></big></font></td></tr>
    
<tr><td bgcolor="#eeaa77"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><dl><dt><a name="-string_matrix"><strong>string_matrix</strong></a>(m)</dt><dd><tt>Convert&nbsp;[3*3]&nbsp;array&nbsp;to&nbsp;string</tt></dd></dl>
 <dl><dt><a name="-string_vector"><strong>string_vector</strong></a>(v)</dt><dd><tt>Convert&nbsp;[3]&nbsp;array&nbsp;to&nbsp;string</tt></dd></dl>
</td></tr></table>
</body></html>